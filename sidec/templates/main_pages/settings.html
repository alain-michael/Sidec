{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/settings.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.6.0/remixicon.css"
      integrity="sha512-GL7EM8Lf8kU23I3kTio2kRWt8YRDVIQcSZjRVtVRfk05kB/QvkyafuTC94Ev0X6qk7Z0r5s06c1lsP1p/ezDYw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.botpress.cloud/webchat/v1/inject.js"></script>
    <script
      src="https://mediafiles.botpress.cloud/6e6052b8-a209-4509-8860-8e0dbac7b0e1/webchat/config.js"
      defer
    ></script>
    <title>Settings</title>
    <link
      rel="icon"
      href="{% static 'images/Asset 6.png' %}"
      type="image/png"
    />
  </head>
  <body>

    <div class="sidebar">
      <div class="logo-details">
        <img src="{% static 'images/Asset 6.png' %}" alt="sidec org" />
        <span class="logo_name">Sidec</span>
      </div>
      <ul class="nav-links">
        <li>
          <a href="{% url 'discover' %}">
            <i class="ri-rocket-2-fill"></i>
            <span class="link_name">Discover</span>
          </a>
          <ul class="sub-menu blank">
            <li>
              <a href="{% url 'discover' %}" class="link_name">Discover</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="{% url 'dashboard' %}">
            <i class="ri-layout-grid-fill"></i>
            <span class="link_name">Dashboard</span>
          </a>
          <ul class="sub-menu blank">
            <li>
              <a href="{% url 'dashboard' %}" class="link_name">Dashboard</a>
            </li>
          </ul>
        </li>
        <!--Drop down nav item-->
        <li>
          <div class="iocn-link">
            <a href="{% url 'courses' %}">
              <i class="ri-book-open-fill"></i>
              <span class="link_name">Courses</span>
            </a>
            <i class="ri-arrow-down-s-line arrow"></i>
          </div>
          <ul class="sub-menu">
            <li>
              <a class="link_name" href="{% url 'courses' %}'">Courses</a>
            </li>
            <li><a href="{% url 'science' %}">Science</a></li>
            <li><a href="{% url 'arts' %}">Arts</a></li>
            <li><a href="{% url 'technology' %}">Technology</a></li>
            <li><a href="{% url 'special' %}">Specialization</a></li>
          </ul>
        </li>

        <li>
          <div class="iocn-link">
            <a href="{% url 'resources' %}">
              <i class="ri-archive-drawer-fill"></i>
              <span class="link_name">Resources</span>
            </a>
            <i class="ri-arrow-down-s-line arrow"></i>
          </div>
          <ul class="sub-menu">
            <li>
              <a href="{% url 'resources' %}" class="link_name">Resources</a>
            </li>
            <li><a href="{% url 'questions' %}">Questions</a></li>
            <li><a href="{% url 'solutions' %}">Solutions</a></li>
            <li><a href="{% url 'test' %}">Test</a></li>
          </ul>
        </li>

        <li>
          <div class="iocn-link">
            <a href="{% url 'tutors' %}">
              <i class="ri-service-fill"></i>
              <span class="link_name">Tutors</span>
            </a>
            <i class="ri-arrow-down-s-line arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a href="{% url 'tutors' %}" class="link_name">Tutors</a></li>
            <li><a href="{% url 'sciencetut' %}">Science</a></li>
            <li><a href="{% url 'artstut' %}">Arts</a></li>
            <li><a href="{% url 'universitytut' %}">University</a></li>
          </ul>
        </li>

        <li>
          <a href="{% url 'discuss' %}">
            <i class="ri-chat-1-fill"></i>
            <span class="link_name">Discussions</span>
          </a>
          <ul class="sub-menu blank">
            <li>
              <a href="{% url 'discuss' %}" class="link_name">Discussions</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="{% url 'iqlink' %}">
            <i class="fa-solid fa-circle-nodes"></i>
            <span class="link_name">IQlink</span>
          </a>
          <ul class="sub-menu blank">
            <li><a href="{% url 'iqlink' %}" class="link_name">IQlink</a></li>
          </ul>
        </li>

        <li>
          <a href="{% url 'settings' %}" class="active">
            <i class="ri-settings-fill"></i>
            <span class="link_name">Settings</span>
          </a>
          <ul class="sub-menu blank">
            <li>
              <a href="{% url 'settings' %}" class="link_name">Settings</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="{% url 'support' %}">
            <i class="ri-question-fill"></i>
            <span class="link_name">Support</span>
          </a>
          <ul class="sub-menu blank">
            <li><a href="{% url 'support' %}" class="link_name">Support</a></li>
          </ul>
        </li>
        <!--Profile details-->
        {% include 'profile_area.html' %}
      </ul>
    </div>
    <section class="home-section header">
      <div class="home-content">
        <i class="ri-menu-3-line ham_menu"></i>
        <div class="flex">
          <form action="" method="post" class="search-form">
            <input
              type="text"
              name="search_box"
              placeholder="Find setting..."
              required
              maxlength="100"
            />
            <button type="submit" class="ri-search-line"></button>
          </form>
          <div class="icons">
            <div id="search-btn" class="ri-search-line"></div>
            <div id="feed-btn" class="ri-notification-4-fill"></div>
            <div id="user-btn" class="ri-user-5-fill"></div>
          </div>

          <div class="profile-2">
            <img src="{% static 'images/4.png' %}" alt="profile" />
            <h3>Fred Joe<i class="ri-verified-badge-fill"></i></h3>
            <span>Student | Buea</span>
            <a href="{% url 'profile' %}" class="btn">View profile</a>
            <div class="flex-btn">
              <a href="{% url 'login' %}" class="option-btn">Log out</a>
              <a href="{% url 'login' %}" class="btn">Share</a>
            </div>
          </div>
        </div>
      </div>
      <div id="quick-select_settings">
        <div class="tab">
          <button class="tablinks" onclick="openSettings(event, 'general')">
            <i class="ri-settings-fill"></i
            ><span class="icon-only">General</span>
          </button>
          <button class="tablinks" onclick="openSettings(event, 'cpassword')">
            <i class="ri-lock-fill"></i
            ><span class="icon-only">Change password</span>
          </button>
          <button class="tablinks" onclick="openSettings(event, 'info')">
            <i class="ri-information-fill"></i
            ><span class="icon-only">Information</span>
          </button>
          <button class="tablinks" onclick="openSettings(event, 'links')">
            <i class="fa-solid fa-link"></i
            ><span class="icon-only">Social links</span>
          </button>
          <button class="tablinks" onclick="openSettings(event, 'connect')">
            <i class="ri-contacts-fill"></i
            ><span class="icon-only">Connections</span>
          </button>
          <button class="tablinks" onclick="openSettings(event, 'notif')">
            <i class="fa-solid fa-bell"></i
            ><span class="icon-only">Notifications</span>
          </button>
        </div>

        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        <div id="general" class="tabcontent">
          <div class="content-settings">
            <form
              id="basic_info"
              action="{% url 'update_student_info' %}"
              method="POST"
              enctype="multipart/form-data"
            >
              {% csrf_token %}
              <img
                id="profile-image"
                src="{{ student.profile_pic.url }}"
                alt="image"
              />
              <input
                type="file"
                id="upload-input"
                style="display: none"
                name="profile_pic"
                accept="image/*"
                onchange="updateProfilePicture(this)"
              />
              <a href="#" class="inline-btn" onclick="triggerFileInput()"
                >Change</a
              >
              <a
                href="#"
                class="inline-option-btn disabled"
                onclick="resetPhoto()"
                >Reset</a
              >
              <span>Allowed JPG, GIF, or PNG. Max size of 800K</span>
              <div class="input-settings">
                <label for="preferred_name_settings">Preferred name</label>
                <input
                  type="text"
                  id="preferred_name_settings"
                  name="preferred_name"
                  placeholder="Joe"
                />
                <label for="user">Name</label>
                <input
                  type="text"
                  id="user"
                  name="user"
                  placeholder="Fred Joe"
                />
                <label for="email">Email</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  placeholder="fred1@gmail.com"
                />
                <div class="alert" id="emailAlert">
                  <i class="ri-error-warning-fill"></i>
                  Your email is not verified.
                  <button onclick="resendEmail()">Resend Email</button>
                </div>
                <label for="school">School</label>
                <input
                  type="text"
                  id="school"
                  name="school"
                  placeholder="University of Buea"
                />
              </div>
              <button class="inline-btn">Save</button>
            </form>
          </div>
        </div>

        <form
          id="password_change"
          action="{% url 'update_student_info' %}"
          method="POST"
        >
        {% csrf_token %}
          <div id="cpassword" class="tabcontent">
            <div class="input-settings">
              <label for="pass">Current password</label>
              <input type="password" id="current_password" name="current_password" />
              <label for="cpass">New password</label>
              <input type="password" id="new_password" name="new_password" />
              <label for="password">Confirm password</label>
              <input type="password" id="confirm_password" name="confirm_password" />
            </div>
            <button class="inline-btn" onclick="check_pass()">Save</button>
          </div>
        </form>

        <div id="info" class="tabcontent">
          <div class="input-settings">
            <label for="bio">Bio</label>
            <textarea
              rows="4"
              cols="50"
              placeholder="Start writing, Keep it short..."
            ></textarea>
            <label for="dob">Birthday</label>
            <input type="date" id="dob" name="dob" />
            <label for="country">Country</label>
            <select name="Country" id="country">
              <option>Cameroon</option>
              <option>Nigeria</option>
              <option selected>Rwanda</option>
              <option>Kenya</option>
              <option>Zambia</option>
            </select>
            <label for="phone">Phone</label>
            <input type="tel" id="phone" name="phone" value="+250 798654693" />
            <label for="git">Github</label>
            <input type="url" id="git" name="git" />
          </div>
          <a href="#" class="inline-btn">Save</a>
        </div>

        <div id="links" class="tabcontent">
          <div class="input-settings">
            <label for="Twitter">Twitter</label>
            <input
              type="url"
              id="Twitter"
              name="links"
              placeholder="https://twitter.com/user"
            />
            <label for="facebook">Facebook</label>
            <input
              type="url"
              id="facebook"
              name="links"
              placeholder="https://www.facebook.com/user"
            />
            <label for="linked">Linkedin</label>
            <input
              type="url"
              id="linked"
              name="links"
              placeholder="https://www.linkedin.com/user"
            />
            <label for="instagram">Instagram</label>
            <input
              type="url"
              id="instagram"
              name="links"
              placeholder="https://www.instagram.com/user"
            />
          </div>
          <a href="#" class="inline-btn">Save</a>
        </div>
        <div id="connect" class="tabcontent">
          <div class="alert" id="emailAlert">
            <i class="ri-error-warning-fill"></i>
            Heads up! No connections yet, let's get you started
            <a href="#">Find</a>
          </div>
        </div>
        <div id="notif" class="tabcontent">
          <div class="input-settings checkbox-group">
            <label>
              <input type="checkbox" id="testResults" name="testResults" />
              Email me my test results
            </label>

            <label>
              <input
                type="checkbox"
                id="connectRequest"
                name="connectRequest"
              />
              Email me when someone requests to connect
            </label>

            <label>
              <input
                type="checkbox"
                id="tutorRecommendations"
                name="tutorRecommendations"
              />
              Email me tutor recommendations
            </label>
          </div>
        </div>
      </div>
    </section>

    <!--Quick select-->

    <script src="{% static 'Javascript/index.js' %}"></script>
    <script>
      function openSettings(evt, cityName) {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the link that opened the tab
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
      }

      function triggerFileInput() {
        document.getElementById("upload-input").click();
      }

      function resetPhoto() {
        document.getElementById("profile-image").src = "../images/cynthia.png";
      }

      function updateProfilePicture(input) {
        const reader = new FileReader();
        const imageFile = input.files[0];
        if (imageFile.size > 800 * 1024) {
          alert("File is too big.");
          return;
        }
        reader.onload = function (e) {
          document.getElementById("profile-image").src = e.target.result;
        };

        reader.readAsDataURL(input.files[0]);
      }
      function check_pass(event) {
        console.log(event.target.parentNode)
      }
    </script>
  </body>
</html>
